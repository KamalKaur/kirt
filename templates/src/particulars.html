{% extends "base.html" %}
{% load staticfiles %}
{% block title %} Particulars {% endblock %}
{% block extrastyle %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/navbar.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/particulars.css">
{% endblock %}
{% block content %}

<div class="container">
<div class="notifications">
  <div class="toggle"></div>
  <div class="messages">
    <p class="message">Worker deleted!</p>
   </div>
</div>

  <div class="font">
    <div class="center"> 
      <h1>{{first_name}} {{last_name}} </h1> 
    </div>

                             <!-- If an icon can be placed instead of payslip button? -->
                             {#<div class = "text-right"> <span class="glyphicon glyphicon-print "></span> </div>#}
    <div class="table-responsive">
      <table class="table"> 
        <tbody> 
          <tr><td>Basic wage</td>  <td class="text-right ">{{basic_wage|floatformat:2}}</td>
          <td>This month advance</td>  <td class="text-right">{{month_advance|floatformat:2}}</td></tr>
          <tr><td>Attended days</td>  <td class="text-right">{{attended_days|floatformat:2}}</td>
          <td>Monthly basic wage</td>  <td class="text-right">{{monthly_basic_wage|floatformat:2}}</td></tr>
          <tr><td>Overtime hours</td>  <td class="text-right">{{overtime_hours|floatformat:2}}</td> 
          <td>Overtime wage</td>  <td class="text-right">{{overtime_wage|floatformat:2}}</td></tr>
          <tr><td>Last month advance</td>  <td class="text-right">{{last_month_advance|floatformat:2}}</td>
          <td>Days in month</td>  <td class="text-right">{{days_in_month|floatformat:2}}</td></tr>
          <tr><td>Monthly wage</td>  <td class="text-right">{{monthly_wage|floatformat:2}}</td>
          <td>Provident fund</td>  <td class="text-right">{{provident_fund|floatformat:2}}</td></tr>
          <tr><td>Amount to be paid</td>  <td class="text-right">{{amount_to_be_paid|floatformat:2}}</td>
          <td>Balance</td>  <td class="text-right">{{further_advance|floatformat:2}}</tr>
        </tbody>
      </table>

      <table class="table"> 
        <tbody>
          <tr><td>Pay salary</td>  
          <td class="text-right"> 
            <input type="number" min="0"  id="paid_{{value.worker_id}}" 
            placeholder="Paid Amount" class="paid" value="{{paid_amount|floatformat:2}}"> 
            <a href="#confirm" data-toggle="modal"> <span class="glyphicon glyphicon-lock"></span> </a> 	
          </td> 
          </tr>
        <tbody>
      </table>
    </div>


<div id="confirm" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                    <h4 class="modal-title">Pay??</h4>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to pay?</p>
                    <p class="text-warning"><small>You'll not be allowed edit</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button id="paid" type="button" class="btn btn-danger" onclick="
                    return paysalary('{% url 'src.views.ajaxrequestpaid' %}?worker_id={{worker_id}}&year={{year}}&month={{month}}')" data-dismiss="modal">Done</button>
                </div>
            </div>
        </div>
</div>

    <!-- Button HTML (to Trigger Modal) -->
    <div class="pull-right">
    <a id="payslip" {% if attended_days != 0 %} href="{% url 'src.views.payslip' %}?worker_id={{worker_id}}" {% endif %} class="btn btn-lg btn-primary {% if attended_days == 0 %} disabled{% endif %}" {% if attended_days == 0 %} data-toggle="tooltip" title="Worker should have attended atleast 1 day." {% endif %} >Payslip</a>
    <a href="#myModal" class="btn btn-lg btn-danger" data-toggle="modal">Delete</a>
    </div>
    </div>
</div>

    <!-- Modal HTML for deleting a worker -->
    <div id="myModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                    <h4 class="modal-title">Delete worker?</h4>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this worker?</p>
                    <p class="text-warning"><small>Deleting this worker, you'll not be allowed to add details for it. Though the previous records can be fetched.</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="
                    return deleteworker('{% url 'src.views.deleteworker' %}?worker_id={{worker_id}}')" data-dismiss="modal">Delete</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block extrajs %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/particulars.js"></script>
{% endblock %}

